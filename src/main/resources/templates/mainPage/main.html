<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Hello Spring Boot!</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <link href="../../css/insstyle.css" th:href="@{/css/insstyle.css}" rel="stylesheet"/>
    <link href="http://getbootstrap.com/dist/css/bootstrap.min.css" th:href="@{http://getbootstrap.com/dist/css/bootstrap.min.css}" rel="stylesheet"/>
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" th:href="@{http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css}" rel="stylesheet"/>
    <script src="../../jquery-1.11.1.min.js" th:href="@{/jquery-1.11.1.min.js}"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js" th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js}"></script>
    <script src="../../application.js" th:href="@{/application.js}"></script>

    <!-- Latest compiled and minified JavaScript -->

</head>
<body>

<div class="main-content">
    <div class="simple-navi-panel">
        <a class="button red-button" data-toggle="modal" data-target="#winnerModal">Losuj</a>
        <a class="button gray-button pull-right" data-toggle="modal" data-target="#prizeListModal">Lista nagród</a>
        <a class="button gray-button pull-right" data-toggle="modal" data-target="#userListModal">Pobierz uczestników</a>
    </div>

    <div class="divider">
    </div>

    <div class="random-users">
        <h2 id="randomUsersHeader">Wylosowano:</h2>
        <table style="width:100%">
            <tr>
                <th>Użytkownik</th>
                <th>Nagroda</th>
            </tr>
            <tr>
                <td>Varcettin</td>
                <td>iPad</td>
            </tr>
            <tr class="even">
                <td>blackbat</td>
                <td>iPhone</td>
            </tr>
            <tr>
                <td>John</td>
                <td>Symfonia C++</td>
            </tr>
            <tr class="even">
                <td>blackbat</td>
                <td>iPhone</td>
            </tr>
            <tr>
                <td>Varcettin</td>
                <td>iPad</td>
            </tr>
            <tr class="even">
                <td>blackbat</td>
                <td>iPhone</td>
            </tr>
            <tr>
                <td>John</td>
                <td>Symfonia C++</td>
            </tr>
        </table>
    </div>
    <br />
    <a class="button gray-button pull-right" data-toggle="modal" data-target="#historyModal">Zobacz historię losowań</a>

</div>



<!-- User List Modal -->
<div class="modal fade" id="userListModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel">Lista użytkowników</h4>
            </div>
            <div class="modal-body">
                <ul id="user_list" class="fa-ul user-list">
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>John Doe</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Jan Kowalski</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Pan Tadeusz</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Miś Puchatek</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Zorro</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Kasia Kowalska</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Jaś i Małgosia</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Trolo Lolo</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>John Doe</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Jan Kowalski</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Pan Tadeusz</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Miś Puchatek</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Zorro</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Kasia Kowalska</li>
                    <li><i class="fa-li fa fa-arrow-circle-right"></i>Jaś i Małgosia</li>
                </ul>
            </div>
            <div class="modal-footer">
                <a  class="orange-button button" data-dismiss="modal">Zamknij</a>
            </div>
        </div>
    </div>
</div>

<!-- Prize List Modal -->
<div class="modal fade" id="prizeListModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel2">Lista nagród</h4>
            </div>
            <div class="modal-body">
                <ul id="prize_list" class="prize-list">
                    <li>Licencja IntelliJ IDEA 13 <span class="pull-right counter"> <a href=""> <i class="fa fa-minus-square fa-2x"></i></a><span class="prize-amount">1</span><a href=""><i class="fa fa-plus-square fa-2x"></i></a> <a href="#"><span class="delete-button"><i class="fa fa-trash fa-2x"></i></span></a></span></li>
                    <li>Licencja IntelliJ IDEA 13 <span class="pull-right counter"> <a href=""> <i class="fa fa-minus-square fa-2x"></i></a><span class="prize-amount">1</span><a href=""><i class="fa fa-plus-square fa-2x"></i></a><a href="#"><span class="delete-button"><i class="fa fa-trash fa-2x"></i></span></a></span></li>
                    <li>Licencja IntelliJ IDEA 13 <span class="pull-right counter"> <a href=""> <i class="fa fa-minus-square fa-2x"></i></a><span class="prize-amount">1</span><a href=""><i class="fa fa-plus-square fa-2x"></i></a><a href="#"><span class="delete-button"><i class="fa fa-trash fa-2x"></i></span></a></span></li>
                    <li>Licencja IntelliJ IDEA 13 <span class="pull-right counter"> <a href=""> <i class="fa fa-minus-square fa-2x"></i></a><span class="prize-amount">1</span><a href=""><i class="fa fa-plus-square fa-2x"></i></a><a href="#"><span class="delete-button"><i class="fa fa-trash fa-2x"></i></span></a></span></li>
                    <li>Licencja IntelliJ IDEA 13 <span class="pull-right counter"> <a href=""> <i class="fa fa-minus-square fa-2x"></i></a><span class="prize-amount">1</span><a href=""><i class="fa fa-plus-square fa-2x"></i></a><a href="#"><span class="delete-button"><i class="fa fa-trash fa-2x"></i></span></a></span></li>
                    <li>Licencja IntelliJ IDEA 13 <span class="pull-right counter"> <a href=""> <i class="fa fa-minus-square fa-2x"></i></a><span class="prize-amount">1</span><a href=""><i class="fa fa-plus-square fa-2x"></i></a><a href="#"><span class="delete-button"><i class="fa fa-trash fa-2x"></i></span></a></span></li>
                    <li>Licencja IntelliJ IDEA 13 <span class="pull-right counter"> <a href=""> <i class="fa fa-minus-square fa-2x"></i></a><span class="prize-amount">1</span><a href=""><i class="fa fa-plus-square fa-2x"></i></a><a href="#"><span class="delete-button"><i class="fa fa-trash fa-2x"></i></span></a></span></li>
                </ul>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <form method="post" action="" name="prizeForm" id="prizeForm" >
                        <fieldset>
                            <div class="col-md-9">
                                <input type="text" name="prizeName" value="" class="form-control pull-left" id="inputPrizeName" placeholder="Podaj nazwę nagrody" />
                            </div>
                            <div class="col-md-3">
                                <a id="btn_add_prize" class="red-button add-prize-button button pull-right" type="submit">Dodaj nagrodę</a>
                            </div>
                        </fieldset>
                    </form>
                </div>
                <a  class="orange-button button pull-right" data-dismiss="modal">Zamknij</a>
            </div>
        </div>
    </div>
</div>

<!-- Winner Modal -->
<div class="modal fade" id="winnerModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel3">Wylosowano:</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <span class="winner-name">
                            John Doe
                        </span>
                    </div>
                    <div class="col-md-6">
                        <span class="prize-name">
                            Kalesony
                        </span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a  class="gray-button button">Zatwierdź</a>
                <a  class="orange-button button pull-right" data-dismiss="modal">Odrzuć</a>
            </div>
        </div>
    </div>
</div>

<!-- History Modal -->
<div class="modal fade" id="historyModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel4">Historia losowań:</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="list-group">
                            <a href="#" class="list-group-item active">
                                Toruń JUG #3
                            </a>
                            <span class="list-group-item">Janko Muzykant <span class="pull-right">Trąbka</span></span>
                            <span class="list-group-item">Ciocia Mariola <span class="pull-right">Trąbka</span></span>
                            <span class="list-group-item">Cristiano Ronaldo <span class="pull-right">Trąbka</span></span>
                        </div>

                        <div class="list-group">
                            <a href="#" class="list-group-item active">
                                Toruń JUG #4
                            </a>
                            <span class="list-group-item">Janko Muzykant <span class="pull-right">Trąbka</span></span>
                            <span class="list-group-item">Cristiano Ronaldo <span class="pull-right">Trąbka</span></span>
                        </div>

                        <div class="list-group">
                            <a href="#" class="list-group-item active">
                                Toruń JUG #5
                            </a>
                            <span class="list-group-item">Janko Muzykant <span class="pull-right">Trąbka</span></span>
                            <span class="list-group-item">Ciocia Mariola <span class="pull-right">Trąbka</span></span>
                            <span class="list-group-item">Cristiano Ronaldo <span class="pull-right">Trąbka</span></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a  class="orange-button button pull-right" data-dismiss="modal">Anuluj</a>
            </div>
        </div>
    </div>
</div>

<!-- History Modal -->
<div class="modal fade" id="endModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel5">Uwaga:</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-12">
                       <span class="end-prize">Brak nagród</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <a  class="orange-button button pull-right" data-dismiss="modal">Anuluj</a>
            </div>
        </div>
    </div>
</div>

<script>
    var prizesLoaded = false;
    $("#userListModal").on('show.bs.modal', function(){
        getParticipants(processParticipants, eventId, appKey);
    });
    $("#prizeListModal").on('show.bs.modal', function(){
        if(prizesLoaded == false)
        {
            getPrizes(processPrizes);
            prizesLoaded = true;
        }
        else
        {
            processPrizesFromArray();
        }
    });
    $("#btn_add_prize").click(function(){
        var prizeName = $("#inputPrizeName").val();
        var prize = Object.create(null);
        prize.name = prizeName;
        addPrize(processAddPrize, prize);
        event.preventDefault();
    });
</script>

</body>
</html>
